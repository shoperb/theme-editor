#!/usr/bin/env ruby

require 'slop'
require 'shoperb/editor'

Slop.parse autocreate: true do

  command 'pull' do
    run do |options, args|
      require 'shoperb/oauth'
      Shoperb.with_configuration(options) do
        Shoperb::OAuth.pull *args
      end
    end
  end

  command 'push' do
    run do |options, args|
      require 'shoperb/oauth'
      Shoperb.with_configuration(options) do
        Shoperb::OAuth.push *args
      end
    end
  end

  command 'mount' do
    run do |options, args|
      require 'shoperb/mounter'
      Shoperb.with_configuration(options) do
        Shoperb::Mounter.start
      end
    end
  end

  command 'clean' do
    run do |options, args|
      Shoperb::Configuration.destroy
    end
  end

end